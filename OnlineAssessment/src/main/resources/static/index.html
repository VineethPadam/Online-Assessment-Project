<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>MITS Online Assessment Portal</title>
	<link rel="stylesheet" href="index_style.css">
	<!-- <link rel="stylesheet" href="login_style.css"> Merged into index_style.css -->
	<link rel="stylesheet" href="student_style.css">
	<link rel="stylesheet" href="faculty_style.css">
	<link rel="stylesheet" href="admin_style.css">
	<link rel="stylesheet" href="faculty-forgot-password.css">
	<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>

<body>

	<!-- Navbar -->
	<nav class="navbar">
		<div class="nav-container">
			<div class="logo-group">
				<img src="Images/AssessPRO.png" alt="MITS Logo" class="college-logo">
			</div>

			<div class="nav-links" id="publicNavLinks">
				<a href="#about" id="aboutUsBtn">About Us</a>
				<a href="#contact" id="contactUsBtn">Contact Us</a>
			</div>

			<div class="profile-menu hidden" id="profileMenu">
				<button class="profile-btn" id="profileTrigger">
					<span class="user-avatar">ğŸ‘¤</span>
					<span class="user-name-display" id="headerUserName">Profile</span>
					<span class="arrow-down">â–¼</span>
				</button>
				<div class="dropdown-content" id="profileDropdown">
					<!-- Populated by JS -->
				</div>
			</div>
		</div>
	</nav>

	<!-- Main Content -->
	<main class="main-content">

		<div class="content-wrapper">

			<!-- Role Selection -->
			<section id="roleSelection" class="active-section">
				<div class="hero-text">
					<h1>Welcome to MITS Assessment</h1>
					<p class="subtitle">Select your role to continue accessing the portal.</p>
				</div>

				<div class="card-container">
					<div class="role-card" data-role="student">
						<div class="icon">ğŸ“</div>
						<h3>Student</h3>
						<p>Access quizzes, view results, and track progress.</p>
						<div class="btn-wrapper">
							<button class="role-btn btn-student">Enter as Student <span
									class="arrow">&rsaquo;</span></button>
						</div>
					</div>
					<div class="role-card" data-role="faculty">
						<div class="icon">ğŸ‘¨â€ğŸ«</div>
						<h3>Faculty</h3>
						<p>Create quizzes, manage students, and monitor results.</p>
						<div class="btn-wrapper">
							<button class="role-btn btn-faculty">Enter as Faculty <span
									class="arrow">&rsaquo;</span></button>
						</div>
					</div>
					<div class="role-card" data-role="admin">
						<div class="icon">ğŸ›¡</div>
						<h3>Admin</h3>
						<p>System administration and full oversight.</p>
						<div class="btn-wrapper">
							<button class="role-btn btn-admin">Enter as Admin <span
									class="arrow">&rsaquo;</span></button>
						</div>
					</div>
				</div>
			</section>

			<!-- Login Form -->
			<section id="loginSection" class="hidden-section">
				<div class="login-card">
					<h3 class="login-title" id="loginTitle">Login</h3>
					<div id="loginError"></div>

					<!-- Student Fields -->
					<div id="studentFields" class="role-fields">
						<div class="input-group">
							<input type="text" id="studentRoll" required placeholder=" ">
							<label>Roll Number</label>
						</div>
						<div class="input-group">
							<input type="password" id="studentPassword" required placeholder=" "
								autocomplete="new-password">
							<label>Password</label>
							<span class="toggle-password" data-target="studentPassword">ğŸ‘ï¸</span>
						</div>
						<button id="studentForgotPasswordBtn" class="link-btn" type="button">Forgot Password?</button>
					</div>

					<!-- Faculty Fields -->
					<div id="facultyFields" class="role-fields">
						<div class="input-group">
							<input type="email" id="facultyEmail" required placeholder=" ">
							<label>Email Address</label>
						</div>
						<div class="input-group">
							<input type="password" id="facultyPassword" required placeholder=" ">
							<label>Password</label>
							<span class="toggle-password" data-target="facultyPassword">ğŸ‘ï¸</span>
						</div>
						<button id="facultyForgotPasswordBtn" class="link-btn" type="button">Forgot Password?</button>
					</div>

					<!-- Admin Fields -->
					<div id="adminFields" class="role-fields">
						<div class="input-group">
							<input type="text" id="adminUsername" required placeholder=" ">
							<label>Username</label>
						</div>
						<div class="input-group">
							<input type="password" id="adminPassword" required placeholder=" ">
							<label>Password</label>
							<span class="toggle-password" data-target="adminPassword">ğŸ‘ï¸</span>
						</div>
					</div>

					<div class="action-buttons">
						<button id="loginBtn" class="primary-btn">Login</button>
						<button id="backBtn" class="secondary-btn">Back</button>
					</div>
				</div>
			</section>

			<!-- Dashboard -->
			<section id="dashboard" class="hidden-section">
				<div class="dashboard-header">
					<h3 id="welcomeMsg">Welcome</h3>
				</div>

				<!-- Student Dashboard -->
				<div id="studentDashboard" class="dashboard-cards hidden">
					<div class="role-card" id="takeQuizBtn">
						<div class="icon">ğŸ¯</div>
						<h3>Take Quiz</h3>
						<p>Start and attempt quizzes assigned to you</p>
					</div>
					<div class="role-card" id="viewResultBtn">
						<div class="icon">ğŸ“Š</div>
						<h3>View Result</h3>
						<p>Check your past quiz results</p>
					</div>

				</div>

				<!-- Faculty Dashboard -->
				<div id="facultyDashboard" class="hidden">
					<div class="dashboard-cards" id="facultyHomeCards">
						<div class="role-card" id="manageExamsCategoryBtn">
							<div class="icon">ğŸ“</div>
							<h3>Manage Examinations</h3>
							<p>Create, activate, and manage your exams.</p>
						</div>
						<div class="role-card" id="viewResultsCategoryBtn">
							<div class="icon">ğŸ“Š</div>
							<h3>Results & Analysis</h3>
							<p>View rankings, publish results, and analyze student performance.</p>
						</div>
					</div>

					<!-- Manage Examinations Category View -->
					<div id="examsCategorySection" class="hidden">
						<div class="manage-header">
							<h2 style="margin:0; font-size: 28px; font-weight:900; color:var(--text-main);">Manage
								Examinations</h2>
							<button id="backFromExamsCategory" class="btn-premium btn-secondary-outline">Back to
								Dashboard</button>
						</div>
						<div class="dashboard-cards">
							<div class="role-card" id="addQuizBtn">
								<div class="icon">â•</div>
								<h3>Add Quiz</h3>
								<p>Create new quizzes and upload questions.</p>
							</div>
							<div class="role-card" id="activateQuizBtn">
								<div class="icon">âœ…</div>
								<h3>Activate Quiz</h3>
								<p>Set quizzes live for students to attempt.</p>
							</div>
							<div class="role-card" id="myExamsBtn">
								<div class="icon">ğŸ“š</div>
								<h3>Exams Conducted by Me</h3>
								<p>View and manage all your previous exams.</p>
							</div>
						</div>
					</div>

					<!-- Results & Analysis Category View -->
					<div id="resultsCategorySection" class="hidden">
						<div class="manage-header">
							<h2 style="margin:0; font-size: 28px; font-weight:900; color:var(--text-main);">Results &
								Analysis</h2>
							<button id="backFromResultsCategory" class="btn-premium btn-secondary-outline">Back to
								Dashboard</button>
						</div>
						<div class="dashboard-cards">
							<div class="role-card" id="viewClassResultsBtn">
								<div class="icon">ğŸ“‹</div>
								<h3>View Class Results</h3>
								<p>Check student performance and rankings.</p>
							</div>
							<div class="role-card" id="publishResultBtn">
								<div class="icon">ğŸ“¢</div>
								<h3>Publish Result</h3>
								<p>Make results visible to participants.</p>
							</div>
							<div class="role-card" id="studentAnalysisBtn">
								<div class="icon">ğŸ”</div>
								<h3>Student Analysis</h3>
								<p>Detailed performance history for individuals.</p>
							</div>
						</div>
					</div>

					<!-- Student Analysis View -->
					<div id="studentAnalysisSection" class="hidden">
						<div class="analysis-search-container">
							<h2>Student Analysis</h2>
							<p>Search for a student by roll number to see their performance across all quizzes.</p>
							<div class="search-box-wrapper">
								<input type="text" id="analysisRollNumber" placeholder="Enter Roll Number">
								<button id="getAnalysisBtn" class="primary-btn">Analyze</button>
							</div>
						</div>
						<div id="analysisResults" class="analysis-results-card">
							<!-- Populated by JS -->
						</div>
						<button id="backFromAnalysis" class="secondary-btn" style="margin-top:20px; width:100%;">Back to
							Dashboard</button>
					</div>
				</div>

				<!-- Admin Dashboard -->
				<div id="adminDashboard" class="hidden">
					<div class="dashboard-cards">
						<div class="role-card" id="manageFacultyDataBtn">
							<div class="icon">ğŸ‘”</div>
							<h3>Manage Faculty data</h3>
							<p>Add, view, download or modify faculty records.</p>
						</div>
						<div class="role-card" id="manageDepartmentsBtn">
							<div class="icon">ğŸ›ï¸</div>
							<h3>Manage Departments</h3>
							<p>Add or remove departments dynamically.</p>
						</div>
						<div class="role-card" id="manageStudentDataBtn">
							<div class="icon">ğŸ¤</div>
							<h3>Manage Student data</h3>
							<p>Add, view, download or modify student records.</p>
						</div>
					</div>
				</div>

				<!-- Manage Student Data Section -->
				<div id="manageStudentSection" class="hidden">
					<div class="manage-header">
						<h2 style="margin:0; font-size: 28px; font-weight:900;">Manage Student Data</h2>
						<button id="backFromManageStudents" class="btn-premium btn-secondary-outline">Back to
							Dashboard</button>
					</div>

					<div class="dashboard-cards" style="margin-bottom: 30px;">
						<div class="role-card" id="uploadStudentAdminBtn">
							<div class="icon">ğŸ“¤</div>
							<h3>Add Student Data</h3>
							<p>Multi-upload via Excel template.</p>
						</div>
						<div class="role-card" id="viewStudentsBtn">
							<div class="icon">ğŸ‘ï¸</div>
							<h3>View Data</h3>
							<p>Search and filter student records.</p>
						</div>
						<div class="role-card" id="downloadStudentsCardBtn">
							<div class="icon">ğŸ“¥</div>
							<h3>Download Data</h3>
							<p>Export students to Excel.</p>
						</div>
					</div>

					<div id="studentViewSection" class="hidden">
						<div class="filter-panel"
							style="background:white; padding:35px; border-radius:20px; border:1px solid var(--border); margin-bottom:40px; display:grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap:25px; box-shadow:var(--shadow-sm);">
							<div class="filter-item">
								<label class="input-label" style="margin:0 0 8px;">Department</label>
								<select id="sDept" class="dept-select-dynamic" style="margin:0; height:50px;">
									<option value="">All Departments</option>
								</select>
							</div>
							<div class="filter-item">
								<label class="input-label" style="margin:0 0 8px;">Section</label>
								<select id="sSec" style="margin:0; height:50px;">
									<option value="">All Sections</option>
									<option value="A">A</option>
									<option value="B">B</option>
									<option value="C">C</option>
									<option value="D">D</option>
									<option value="E">E</option>
									<option value="F">F</option>
									<option value="G">G</option>
									<option value="H">H</option>
									<option value="I">I</option>
									<option value="J">J</option>
								</select>
							</div>
							<div class="filter-item">
								<label class="input-label" style="margin:0 0 8px;">Year</label>
								<select id="sYear" style="margin:0; height:50px;">
									<option value="">All Years</option>
									<option value="1">1</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
								</select>
							</div>
							<div
								style="grid-column: 1/-1; display:flex; gap:15px; margin-top:10px; border-top:1px solid var(--border); padding-top:25px;">
								<button id="fetchStudentsBtn" class="btn-premium btn-primary-grad"
									style="flex:2; height:54px;">ğŸ” View Students</button>
							</div>
						</div>

						<div class="table-container" style="overflow-x:auto;">
							<table style="width:100%; border-collapse:collapse;">
								<thead style="background:var(--background); border-bottom:2px solid var(--border);">
									<tr>
										<th
											style="padding:15px 20px; text-align:left; color:var(--text-main); font-weight:800; font-size:12px; text-transform:uppercase;">
											Roll Number</th>
										<th
											style="padding:15px 20px; text-align:left; color:var(--text-main); font-weight:800; font-size:12px; text-transform:uppercase;">
											Name</th>
										<th
											style="padding:15px 20px; text-align:left; color:var(--text-main); font-weight:800; font-size:12px; text-transform:uppercase;">
											Email</th>
										<th
											style="padding:15px 20px; text-align:left; color:var(--text-main); font-weight:800; font-size:12px; text-transform:uppercase;">
											Dept</th>
										<th
											style="padding:15px 20px; text-align:left; color:var(--text-main); font-weight:800; font-size:12px; text-transform:uppercase;">
											Sec</th>
										<th
											style="padding:15px 20px; text-align:left; color:var(--text-main); font-weight:800; font-size:12px; text-transform:uppercase;">
											Year</th>
										<th
											style="padding:15px 20px; text-align:left; color:var(--text-main); font-weight:800; font-size:12px; text-transform:uppercase;">
											Actions</th>
									</tr>
								</thead>
								<tbody id="studentTableBody">
									<tr>
										<td colspan="7"
											style="text-align:center; padding:100px; color:var(--text-muted); font-size:16px;">
											Set filters and click "View Students"</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>

				<!-- Manage Faculty Data Section -->
				<div id="manageFacultySection" class="hidden">
					<div class="manage-header">
						<h2 style="margin:0; font-size: 28px; font-weight:900;">Manage Faculty Data</h2>
						<button id="backFromManageFaculty" class="btn-premium btn-secondary-outline">Back to
							Dashboard</button>
					</div>

					<div class="dashboard-cards" style="margin-bottom: 30px;">
						<div class="role-card" id="uploadFacultyAdminBtn">
							<div class="icon">ğŸ“¤</div>
							<h3>Add Faculty Data</h3>
							<p>Multi-upload via Excel template.</p>
						</div>
						<div class="role-card" id="viewFacultyBtn">
							<div class="icon">ğŸ‘ï¸</div>
							<h3>View Data</h3>
							<p>Search and filter faculty records.</p>
						</div>
						<div class="role-card" id="downloadFacultyCardBtn">
							<div class="icon">ğŸ“¥</div>
							<h3>Download Data</h3>
							<p>Export faculty to Excel.</p>
						</div>
					</div>

					<div id="facultyViewSection" class="hidden">
						<div class="filter-panel"
							style="background:white; padding:35px; border-radius:20px; border:1px solid var(--border); margin-bottom:40px; display:grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap:25px; box-shadow:var(--shadow-sm);">
							<div class="filter-item">
								<label class="input-label" style="margin:0 0 8px;">Department</label>
								<select id="fDeptAdmin" class="dept-select-dynamic" style="margin:0; height:50px;">
									<option value="">All Departments</option>
								</select>
							</div>
							<div class="filter-item">
								<label class="input-label" style="margin:0 0 8px;">Section</label>
								<select id="fSecAdmin" style="margin:0; height:50px;">
									<option value="">All Sections</option>
									<option value="A">A</option>
									<option value="B">B</option>
									<option value="C">C</option>
									<option value="D">D</option>
									<option value="E">E</option>
									<option value="F">F</option>
									<option value="G">G</option>
									<option value="H">H</option>
									<option value="I">I</option>
									<option value="J">J</option>
								</select>
							</div>
							<div class="filter-item">
								<label class="input-label" style="margin:0 0 8px;">Year</label>
								<select id="fYearAdmin" style="margin:0; height:50px;">
									<option value="">All Years</option>
									<option value="1">1</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
								</select>
							</div>
							<div
								style="grid-column: 1/-1; display:flex; gap:15px; margin-top:10px; border-top:1px solid var(--border); padding-top:25px;">
								<button id="fetchFacultyBtn" class="btn-premium btn-primary-grad"
									style="flex:2; height:54px;">ğŸ” View Faculty</button>
							</div>
						</div>

						<div class="table-container" style="overflow-x:auto;">
							<table style="width:100%; border-collapse:collapse;">
								<thead style="background:var(--background); border-bottom:2px solid var(--border);">
									<tr>
										<th
											style="padding:15px 20px; text-align:left; color:var(--text-main); font-weight:800; font-size:12px; text-transform:uppercase;">
											Faculty ID</th>
										<th
											style="padding:15px 20px; text-align:left; color:var(--text-main); font-weight:800; font-size:12px; text-transform:uppercase;">
											Name</th>
										<th
											style="padding:15px 20px; text-align:left; color:var(--text-main); font-weight:800; font-size:12px; text-transform:uppercase;">
											Email</th>
										<th
											style="padding:15px 20px; text-align:left; color:var(--text-main); font-weight:800; font-size:12px; text-transform:uppercase;">
											Dept</th>
										<th
											style="padding:15px 20px; text-align:left; color:var(--text-main); font-weight:800; font-size:12px; text-transform:uppercase;">
											Actions</th>
									</tr>
								</thead>
								<tbody id="facultyTableBody">
									<tr>
										<td colspan="5"
											style="text-align:center; padding:100px; color:var(--text-muted); font-size:16px;">
											Set filters and click "View Faculty"</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</section>

		</div>
	</main>

	<footer class="page-footer">
		<div class="footer-content">
			Developed by <strong>Vineeth sai</strong> & <strong>Yaswanth Reddy</strong>,
			Dept of CSE (2023â€“2027 Batch) |
			Mentor <strong>Mr. B Anandaraj Asst.Prof</strong>
		</div>
	</footer>

	<!-- Session Expired Modal -->
	<div id="sessionExpiredModal" class="session-modal hidden">
		<div class="session-modal-content">
			<div class="session-icon">â°</div>
			<h2>Session Expired</h2>
			<p>Your login session has expired.<br>Please login again to continue.</p>
			<button id="sessionExpiredBtn" class="session-btn">Login Again</button>
		</div>
	</div>

	<script src="authFetch.js"></script>
	<script src="login.js"></script>
	<script src="student.js"></script>
	<script src="student_quiz_fix.js"></script>
	<script src="faculty.js"></script>
	<script src="admin.js"></script>
	<script src="faculty-forgot-password.js"></script>
	<script src="student_forgot_password.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>

</html>